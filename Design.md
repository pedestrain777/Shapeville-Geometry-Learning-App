# Shapeville项目设计文档

## 项目概述
Shapeville是一个交互式Java应用程序，旨在帮助小学生（5-10岁）学习和练习基本几何概念，包括形状、角度和计算。该应用程序作为QMUL London School的教学助手，该学校有500多名学生就读于Key Stage 1（1-2年级）和Key Stage 2（3-4年级）。

## 用户需求

### 目标用户
- 5-10岁的小学生
- QMUL London School的教师
- 特别考虑14名色盲儿童
- 特别考虑注意力持续时间短的儿童

### 可访问性需求
- 包容且适合色盲用户的设计 **[部分实现]** - 已使用明确的颜色对比，但需要进一步测试色盲兼容性
- 有吸引力的界面以保持注意力和动力 **[已实现]** - 使用简洁布局和视觉反馈
- 适合年幼儿童的用户友好GUI **[已实现]** - 使用大按钮、清晰标签和简单导航

## 核心应用功能

### 主界面需求
1. 显示可用游戏关卡的信息 **[已实现]** - MainView中实现了游戏关卡按钮
2. 进度条以跟踪会话期间的用户进度 **[已实现]** - MainView中包含进度条
3. "End Session"（结束会话）按钮，在优雅终止前显示当前分数/进度 **[已实现]** - 通过Alert显示最终分数
4. "Home"（主页）按钮，随时返回主屏幕 **[已实现]** - MainView中提供了返回主屏幕功能

### Key Stage 1任务

#### Task 1: 形状识别（Identification of Shapes）
**2D Shapes（基础级评分）**
- 一次显示一个形状 **[已实现]** - ShapeIdentificationView中实现
- 提示用户输入形状名称 **[已实现]** - 通过文本字段实现
- 3次错误尝试后，显示正确名称 **[已实现]** - 在checkAnswer方法中处理
- 继续直到用户识别完所有4个形状或点击"Home" **[部分实现]** - 需要添加形状计数器
- 基本2D形状：circle, rectangle, triangle, oval, octagon, square, heptagon, rhombus, pentagon, hexagon, kite **[已实现]** - 所有形状类都已创建

**3D Shapes（高级评分）**
- 与2D形状相同的流程 **[已实现]** - 使用相同的界面组件
- 基本3D形状：cube, cuboid, cylinder, sphere, triangular prism, square-based pyramid, cone, tetrahedron **[已实现]** - 所有3D形状类都已创建

**[其它问题]** - progress有问题，3D绘制效果差，退出机制有问题 **[已解决]** 
- progress计算修改：原先是按totaltasks = 6（这是总任务）；本task1按答对4道题计算，一道题25%；上方进度条可以再用来表示总6个的进度
-  当用户答对 4 题时，弹出一个对话框，提示“继续”还是“重新开始”，根据选择决定是否继续出题还是重置进度。还是重置进度。
-  3D图形全部重新绘制，加以旋转与明暗变化

#### Task 2: 角度类型识别（Identification of Angle Types）
**基础级评分**
- 要求用户输入角度测量值（0-360度，以10度为倍数） **[部分实现]** - 需要添加输入验证确保是10的倍数
- 显示角度的视觉表示 **[已实现]** - 通过Angle类的draw方法实现
- 提示用户识别角度类型（acute, right, obtuse, reflex, straight） **[已实现]** - 通过下拉菜单选择
- 3次错误尝试后，显示正确类型 **[已实现]** - 在checkAnswer方法中处理
- 继续直到用户识别完所有4种类型或点击"Home" **[部分实现]** - 需要添加角度类型计数器
- 角度类型：acute（<90°），right（=90°），obtuse（>90°且<180°），straight（=180°），reflex（>180°且<360°） **[已实现]** - 在Angle和AngleType类中定义

**[其它问题]** - 角的显示以及提示文字显示（界面布局）有问题，并不是依照用户输入绘制的。下拉框选择有问题（选项和正确选项无法正确匹配）

### Key Stage 2任务

#### Task 3: 形状面积计算（Area Calculation of Shapes）
**基础级评分**
- 允许用户选择四种形状之一：rectangle, parallelogram, triangle, trapezium **[部分实现]** - 当前仅支持rectangle和triangle，需要添加parallelogram和trapezium
- 为相应输入值生成随机数字（1-20） **[已实现]** - 在generateShape方法中实现
- 用户有3分钟时间计算面积 **[已实现]** - 通过Timer实现倒计时
- 3次错误尝试或正确回答后，显示带有标记尺寸和公式的形状 **[部分实现]** - 仅对Rectangle实现了公式显示，需要为其他形状添加
- 继续直到用户练习完所有4种形状或点击"Home" **[待实现]** - 需要添加形状跟踪功能

**[其它问题]** - 图形显示不对，计算依赖的数据并未显示

#### Task 4: 圆的面积和周长计算（Area and Circumference Calculation of Circle）
**基础级评分**
- 允许用户选择"Area"或"Circumference" **[已实现]** - 通过单选按钮实现
- 显示半径（radius）或直径（diameter）（1-20之间的随机数） **[已实现]** - 目前仅显示半径，需要添加直径显示选项
- 用户有3分钟时间计算并输入答案 **[已实现]** - 通过Timer实现倒计时
- 3次错误尝试或正确回答后，显示带有标记半径/直径和公式的圆 **[已实现]** - 通过Circle类的方法实现
- 继续直到用户练习完半径和直径的两种计算，或点击"Home" **[待实现]** - 需要添加练习跟踪功能

**[其它问题]** - 系统答案似乎不对

### 奖励任务

#### Bonus 1: 复合形状面积计算（Compound Shape Area Calculation）
**高级评分**
- 允许用户选择9种复合形状之一 **[部分实现]** - CompoundShapeView中有占位符，但仅实现了第一种形状
- 提供计算面积所需的值 **[部分实现]** - 需要为所有9种形状添加正确的尺寸值
- 用户有5分钟时间计算并输入答案 **[已实现]** - 通过Timer实现倒计时
- 3次错误尝试后，显示正确公式和解决方案 **[部分实现]** - 公式显示功能需要完善
- 继续直到用户练习完所有9种形状或点击"Home" **[待实现]** - 需要添加形状跟踪功能

#### Bonus 2: 扇形面积和弧长计算（Sector Area and Arc Length Calculation）
**高级评分**
- 允许用户选择8个扇形选项之一 **[待实现]** - SectorCalculationView中需要实现8个选项的选择功能
- 提供计算扇形面积所需的值 **[已实现]** - 显示半径和角度
- 用户有5分钟时间计算面积 **[已实现]** - 通过Timer实现倒计时
- 3次错误尝试后，显示正确公式和解决方案 **[已实现]** - 在showSolution方法中实现
- 继续直到用户练习完所有8个选项或点击"Home" **[待实现]** - 需要添加选项跟踪功能

**[其它问题]** - 文字显示为白色

## 评分系统

实现两级评分：

**基础级评分（Basic Level Scoring）:**
| 尝试次数 | 得分 |
|----------|--------|
| 一次     | 3      |
| 两次     | 2      |
| 三次     | 1      |

**高级评分（Advanced Level Scoring）:**
| 尝试次数 | 得分 |
|----------|--------|
| 一次     | 6      |
| 两次     | 4      |
| 三次     | 2      |

- 获得分数时显示适当的消息（例如，"Great job!"） **[已实现]** - 在各视图的checkAnswer方法中实现
- 在整个会话期间跟踪并显示总分 **[已实现]** - 通过GameController和MainView实现

## 技术需求

1. 使用JavaFX的用户友好图形用户界面（GUI） **[已实现]** - 所有视图均使用JavaFX组件
2. 具有适当错误处理的健壮应用流程 **[部分实现]** - 已有基本错误处理，但需要更全面的异常处理
3. 定时练习的计时功能 **[已实现]** - 通过Timer和TimerTask实现
4. 分数跟踪和进度监控 **[已实现]** - 通过GameController实现
5. 几何形状和角度的视觉表示 **[已实现]** - 所有形状类都有draw方法

## 提交要求

项目提交必须包括：

1. PDF报告，包含：
   - 团队成员任务分配（1页） **[待创建]**
   - 系统设计，包括流程图和类图（2-4页） **[待创建]**
   - 设计选择的理由，包括可访问性功能（0.5-1页） **[待创建]**
   - 用户手册（1-2页） **[待创建]**
   - AI工具使用描述，详细说明使用的具体工具（1-2页） **[待创建]**
   - 团队对Mini-Project经验的反思（0.5页） **[待创建]**

2. 所有Java源文件（带有适当的内部注释） **[部分完成]** - 源文件已创建，但需要更多详细注释

3. HTML javadocs **[待创建]** - 需要生成API文档

## 实现计划

以下是项目完成前需要优先处理的任务：

1. **实现所有形状**：
   - 添加Parallelogram和Trapezium类并完成其面积计算 **[优先级高]**
   - 完成所有9种复合形状的实现 **[优先级高]**

2. **完善用户体验**：
   - 确保所有视图对色盲用户友好 **[优先级中]**
   - 添加视觉和听觉反馈以提高用户体验 **[优先级低]**

3. **功能完善**：
   - 添加形状和练习计数器以跟踪用户进度 **[优先级高]**
   - 实现所有待实现的功能点 **[优先级高]**

4. **文档和测试**：
   - 为所有类添加详细注释 **[优先级中]**
   - 生成javadoc文档 **[优先级中]**
   - 编写PDF报告的各部分 **[优先级高]**
   - 进行全面测试，特别是对色盲用户的可访问性测试 **[优先级高]**

## AI工具使用

- 可以使用AI工具生成代码，但提示必须明确反映特定任务
- 必须记录提交给AI工具的三个关键提示及相关响应
- 反思AI工具如何帮助开发并建立在现有知识基础上
